"0","# Sử dụng yardstick để tính PR curves"
"0","pr_lr_data <- results_df %>% pr_curve(truth, prob_lr)"
"0","pr_rf_data <- results_df %>% pr_curve(truth, prob_rf)"
"0","pr_xgb_data <- results_df %>% pr_curve(truth, prob_xgb)"
"0",""
"0","# Tính AUC-PR"
"0","auc_pr_lr_val <- pr_auc(results_df, truth, prob_lr)$.estimate"
"0","auc_pr_rf_val <- pr_auc(results_df, truth, prob_rf)$.estimate"
"0","auc_pr_xgb_val <- pr_auc(results_df, truth, prob_xgb)$.estimate"
"0",""
"0","# Vẽ PR curves"
"0","pr_plot <- ggplot() +"
"0","  geom_path(data = pr_lr_data, aes(x = recall, y = precision, color = ""Logistic Regression""), linewidth = 1) +"
"0","  geom_path(data = pr_rf_data, aes(x = recall, y = precision, color = ""Random Forest (Tuned)""), linewidth = 1) +"
"0","  geom_path(data = pr_xgb_data, aes(x = recall, y = precision, color = ""XGBoost (Tuned)""), linewidth = 1) +"
"0","  labs(title = ""So sánh Đường cong Precision-Recall"","
"0","       x = ""Recall"","
"0","       y = ""Precision"","
"0","       color = ""Mô hình"") +"
"0","  annotate(""text"", x = 0.75, y = 0.85, label = paste(""LR AUC-PR:"", sprintf(""%.3f"", auc_pr_lr_val))) +"
"0","  annotate(""text"", x = 0.75, y = 0.78, label = paste(""RF AUC-PR:"", sprintf(""%.3f"", auc_pr_rf_val))) +"
"0","  annotate(""text"", x = 0.75, y = 0.71, label = paste(""XGB AUC-PR:"", sprintf(""%.3f"", auc_pr_xgb_val))) +"
"0","  theme_minimal() +"
"0","  scale_color_brewer(palette = ""Set1"")"
"0",""
"0","print(pr_plot)"
