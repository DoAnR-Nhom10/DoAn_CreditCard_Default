"0","# Load test data"
"0","test_data_path <- paste0(PROCESSED_DIR, ""test_data.rds"")"
"0","if (file.exists(test_data_path)) {"
"0","  test_data <- readRDS(test_data_path)"
"0","  cat(""Đã tải test_data.rds thành công.\n"")"
"0","} else {"
"0","  stop(""Không tìm thấy file test_data.rds. Hãy chắc chắn script 04 đã chạy."")"
"0","}"
"1","Đã tải test_data.rds thành công.
"
"0","# Đảm bảo biến mục tiêu là factor và có levels đúng"
"0","# (Giả sử levels là ""0"" và ""1"", với ""1"" là positive class - vỡ nợ)"
"0","test_data$default.payment.next.month <- factor(test_data$default.payment.next.month, levels = c(""0"", ""1""))"
"0","cat(""Levels của biến mục tiêu trong test_data:\n"")"
"1","Levels của biến mục tiêu trong test_data:
"
"0","print(levels(test_data$default.payment.next.month))"
"1","[1] ""0"" ""1""
"
"0","# Load models"
"0","# Models này được lưu từ script 06_hyperparameter_tuning.Rmd và là các workflow objects của tidymodels"
"0","model_lr_path <- paste0(MODELS_DIR, ""logistic_regression_final.rds"")"
"0","model_rf_tuned_path <- paste0(MODELS_DIR, ""random_forest_tuned_final.rds"")"
"0","model_xgb_tuned_path <- paste0(MODELS_DIR, ""xgboost_tuned_final.rds"")"
"0",""
"0","if (file.exists(model_lr_path) && file.exists(model_rf_tuned_path) && file.exists(model_xgb_tuned_path)) {"
"0","  model_lr <- readRDS(model_lr_path)"
"0","  model_rf_tuned <- readRDS(model_rf_tuned_path)"
"0","  model_xgb_tuned <- readRDS(model_xgb_tuned_path)"
"0","  cat(""Đã tải các mô hình thành công.\n"")"
"0","} else {"
"0","  stop(""Không tìm thấy một hoặc nhiều file mô hình. Hãy chắc chắn script 06 đã chạy và lưu các mô hình."")"
"0","}"
"1","Đã tải các mô hình thành công.
"
"0","# Kiểm tra nhanh cấu trúc một mô hình (ví dụ RF)"
"0","# print(model_rf_tuned)"
